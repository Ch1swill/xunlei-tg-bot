services:
  xunlei-bot:
    image: ch1swill/xunlei-tg-bot:latest
    container_name: xunlei_tg_bot
    environment:
      # ========== Telegram 配置 ==========
      - BOT_TOKEN=你的TG_BOT_TOKEN
      - CHAT_ID=你的TG_CHAT_ID
      
      # ========== 迅雷配置 ==========
      # 迅雷 API 地址 (群晖套件格式)
      - XUNLEI_HOST=http://你的NAS_IP:2345/webman/3rdparty/pan-xunlei-com/index.cgi
      
      # 默认下载目录的 file_id (从迅雷网页版获取)
      - XUNLEI_PARENT_FILE_ID=你的目录ID
      
      # 设备空间 ID (URL编码格式)
      - XUNLEI_SPACE=device_id%23你的设备ID
      
      # 【修改】这里不要写死 Token 了，或者留空作为备用
      - XUNLEI_AUTH=
      
      # 【新增】告诉程序数据库在哪里
      - XUNLEI_DB_PATH=/xunlei_data/user.core.db
      
      # ========== 代理配置 (可选) ==========
      - HTTPS_PROXY=http://代理IP:端口
      - HTTP_PROXY=http://代理IP:端口
      - NO_PROXY=localhost,127.0.0.1,你的NAS_IP
    volumes:
      # 【新增关键行】将迅雷的配置目录映射进来 (只读模式 :ro 防止损坏)
      # ⚠️ 注意：冒号左边的路径必须是你 NAS 上 cnk3x 容器实际的映射路径
      # 通常是 /mnt/sdb1/configs/xunlei/data 包含 user.core.db 的目录
      - /mnt/nas_docker/xunlei/.drive:/xunlei_data:ro  
      
    restart: unless-stopped
